local config = {
 
  loops = 20,
  tapTimeout = 5,
  waitForBaloonTimeout = 1.5,
  
  
  waitForCheck = 0.1,
  waitForTap = 3,
}

  if LPH_OBFUSCATED == false or LPH_OBFUSCATED == nil then
  LPH_NO_VIRTUALIZE = function(f) return f end
  LPH_NO_UPVALUES = function(...) return ... end
  end
  

  if not game:IsLoaded() then
    game.Loaded:Wait()
  end
  
	local w1 = true -- bat tat rocket w1
	local w2 = false -- bat tat rocket w2

  local plrs = game:GetService("Players")
  local plr = plrs.LocalPlayer
  local options = {}
  local orbFolder = game:GetService("Workspace"):WaitForChild("__THINGS"):WaitForChild("Orbs")
  local lootbagFolder = workspace:WaitForChild("__THINGS"):WaitForChild("Lootbags")
  local breakablesFolder = game:GetService("Workspace"):WaitForChild("__THINGS"):WaitForChild("Breakables")
  local replicatedStorage = game:GetService("ReplicatedStorage")
  local Lib = require(replicatedStorage.Library)
  local plrs = game:GetService("Players") 
  local plr = plrs.LocalPlayer
  local tpService = game:GetService("TeleportService")
  local dummyfunc = LPH_NO_UPVALUES(function() return end)


if w2 then
    game.ReplicatedStorage.Network.World2Teleport:InvokeServer()
elseif w1 then
    game.ReplicatedStorage.Network.World1Teleport:InvokeServer()
end





task.spawn(function()

		local decalsyeeted = true
local g = game
local w = g.Workspace
local l = g.Lighting
local t = w.Terrain
sethiddenproperty(l,"Technology",2)
sethiddenproperty(t,"Decoration",false)
game:GetService("StarterGui"):SetCoreGuiEnabled(Enum.CoreGuiType.Chat,false)
t.WaterWaveSize = 0
t.WaterWaveSpeed = 0
t.WaterReflectance = 0
t.WaterTransparency = 0
l.GlobalShadows = 0
l.FogEnd = 9e9
l.Brightness = 0
settings().Rendering.QualityLevel = "1"
for i, v in pairs(w:GetDescendants()) do
    if v:IsA("BasePart") and not v:IsA("MeshPart") then
        v.Material = "Plastic"
        v.Reflectance = 0
    elseif (v:IsA("Decal") or v:IsA("Texture")) and decalsyeeted then
        v.Transparency = 1
    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
        v.Lifetime = NumberRange.new(0)
    elseif v:IsA("Explosion") then
        v.BlastPressure = 1
        v.BlastRadius = 1
    elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
        v.Enabled = false
    elseif v:IsA("MeshPart") and decalsyeeted then
        v.Material = "Plastic"
        v.Reflectance = 0
        v.TextureID = 10385902758728957
    elseif v:IsA("SpecialMesh") and decalsyeeted  then
        v.TextureId=0
    elseif v:IsA("ShirtGraphic") and decalsyeeted then
        v.Graphic=1
    elseif (v:IsA("Shirt") or v:IsA("Pants")) and decalsyeeted then
        v[v.ClassName.."Template"]=1
    end
end
for i = 1,#l:GetChildren() do
    e=l:GetChildren()[i]
    if e:IsA("BlurEffect") or e:IsA("SunRaysEffect") or e:IsA("ColorCorrectionEffect") or e:IsA("BloomEffect") or e:IsA("DepthOfFieldEffect") then
        e.Enabled = false
    end
end
w.DescendantAdded:Connect(function(v)
   if v:IsA("BasePart") and not v:IsA("MeshPart") then
        v.Material = "Plastic"
        v.Reflectance = 0
    elseif v:IsA("Decal") or v:IsA("Texture") and decalsyeeted then
        v.Transparency = 1
    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
        v.Lifetime = NumberRange.new(0)
    elseif v:IsA("Explosion") then
        v.BlastPressure = 1
        v.BlastRadius = 1
    elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
        v.Enabled = false
    elseif v:IsA("MeshPart") and decalsyeeted then
        v.Material = "Plastic"
        v.Reflectance = 0
        v.TextureID = 10385902758728957
    elseif v:IsA("SpecialMesh") and decalsyeeted then
        v.TextureId=0
    elseif v:IsA("ShirtGraphic") and decalsyeeted then
        v.ShirtGraphic=1
    elseif (v:IsA("Shirt") or v:IsA("Pants")) and decalsyeeted then
        v[v.ClassName.."Template"]=1
            end
        end)
end)


task.wait()

task.spawn(function()

		local decalsyeeted = true
local g = game
local w = g.Workspace
local l = g.Lighting
local t = w.Terrain
sethiddenproperty(l,"Technology",2)
sethiddenproperty(t,"Decoration",false)
t.WaterWaveSize = 0
t.WaterWaveSpeed = 0
t.WaterReflectance = 0
t.WaterTransparency = 1
l.GlobalShadows = 0
l.FogEnd = 9e9
l.Brightness = 0
settings().Rendering.QualityLevel = "Level01"
for i, v in pairs(w:GetDescendants()) do
    if v:IsA("BasePart") and not v:IsA("MeshPart") then
        v.Material = "Plastic"
        v.Transparency = 1
        v.Reflectance = 0
    elseif (v:IsA("Decal") or v:IsA("Texture")) and decalsyeeted then
        v.Transparency = 1
    elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
        v.Lifetime = NumberRange.new(0)
    elseif v:IsA("Explosion") then
        v.BlastPressure = 1
        v.BlastRadius = 1
    elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
        v.Enabled = false
    elseif v:IsA("MeshPart") and decalsyeeted then
        v.Material = "Plastic"
        v.Transparency = 1
        v.Reflectance = 0
        v.TextureID = 0
    elseif v:IsA("SpecialMesh") and decalsyeeted  then
        v.TextureId=0
    elseif v:IsA("ShirtGraphic") and decalsyeeted then
        v.Graphic=1
    elseif (v:IsA("Shirt") or v:IsA("Pants")) and decalsyeeted then
        v[v.ClassName.."Template"]=1
    end
end
for i = 1,#l:GetChildren() do
    e=l:GetChildren()[i]
    if e:IsA("BlurEffect") or e:IsA("SunRaysEffect") or e:IsA("ColorCorrectionEffect") or e:IsA("BloomEffect") or e:IsA("DepthOfFieldEffect") then
        e.Enabled = false
    end
end
w.DescendantAdded:Connect(function(v)
    pcall(function()
        if v:IsA("BasePart") and not v:IsA("MeshPart") then
            v.Material = "Plastic"
            v.Reflectance = 0
            v.Transparency = 1
        elseif v:IsA("Decal") or v:IsA("Texture") and decalsyeeted then
            v.Transparency = 1
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Lifetime = NumberRange.new(0)
        elseif v:IsA("Explosion") then
            v.BlastPressure = 1
            v.BlastRadius = 1
        elseif v:IsA("Fire") or v:IsA("SpotLight") or v:IsA("Smoke") or v:IsA("Sparkles") then
            v.Enabled = false
        elseif v:IsA("MeshPart") and decalsyeeted then
            v.Material = "Plastic"
            v.Reflectance = 0
            v.TextureID = 0
            v.Transparency = 1
        elseif v:IsA("SpecialMesh") and decalsyeeted then
            v.TextureId=0
        elseif v:IsA("ShirtGraphic") and decalsyeeted then
            v.ShirtGraphic=1
        elseif (v:IsA("Shirt") or v:IsA("Pants")) and decalsyeeted then
            v[v.ClassName.."Template"]=1
        end
    end)
end)			
end)


task.wait()

task.spawn(function()
game:GetService("Workspace").Map2:remove()
end)

task.spawn(function()
game:GetService("Workspace").Map:remove()
end)

task.spawn(function()
game:GetService("Workspace").ALWAYS_RENDERING:remove()
end)

task.spawn(function()
game:GetService("Workspace").ALWAYS_RENDERING_2:remove()
end)

task.spawn(function()
game:GetService("Workspace").Map2.Parent:remove()
end)

task.spawn(function()
game:GetService("Workspace").Map.Parent:remove()
end)

task.spawn(function()
game:GetService("Workspace").ALWAYS_RENDERING.Parent:remove()
end)

task.spawn(function()
game:GetService("Workspace").ALWAYS_RENDERING_2.Parent:remove()
end)


   
task.spawn(function()

if getgenv().configballon.Settings.UltraBoost then
	
    
    
   
                   
			UserSettings():GetService('UserGameSettings').MasterVolume = 0
			settings().Rendering.QualityLevel = "0" 
			settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level04
			game:GetService("StarterGui"):SetCoreGuiEnabled(Enum.CoreGuiType.Chat,false)
			game:GetService("StarterGui"):SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList,false)
			game.CoreGui:FindFirstChild("RobloxGui").Enabled = false
			

            game:GetService("Workspace").__THINGS.Cannons:remove()
            game:GetService("Workspace").__THINGS.Flags:remove()
            game:GetService("Workspace").__THINGS.Ultimates:remove()
            game:GetService("Workspace").__THINGS.AnimatedBreakables:remove()
            game:GetService("Workspace").__THINGS.MagicOrbs:remove()
            game:GetService("Workspace").__THINGS.Chests:remove()
			
			
			
			
			task.wait()


		

            
			
			
			 for _, v in pairs(game.Players:GetChildren()) do
                for _, v2 in pairs(v.Character:GetDescendants()) do
                    if v2:IsA("BasePart") or v2:IsA("Decal") then
                        v2.Transparency = 1
                    end
                end
            end
			

            

			task.wait()

			
		pcall(function()
            local DebrisTempFolder = game.ReplicatedStorage:FindFirstChild("DebrisTempFolder") or Instance.new("Folder")
            DebrisTempFolder.Name = "DebrisTempFolder"
            DebrisTempFolder.Parent = game.ReplicatedStorage
            for i, v in workspace.__DEBRIS:GetChildren() do
                v.Parent = DebrisTempFolder
            end
            workspace.__DEBRIS.ChildAdded:Connect(function(v)
                v.Parent = DebrisTempFolder            
            end)
        end)
        
        -- DELETE USELESS SCRIPTS
        for i, v in Player.PlayerScripts:GetChildren() do
            print(i, v)
            if v.Name ~= "Scripts" then
                v:Destroy()
            end
        end
        for i, v in Player.PlayerScripts.Scripts:GetChildren() do
            print(i, v)
            if not (v.Name == "Game" or v.Name == "Core") then
                v:Destroy()
            end
        end
        for i, v in Player.PlayerScripts.Scripts.Game:GetChildren() do
            pcall(function()
                if not string.find(v.Name, "Breakables") then
                    v:Destroy()
                end
            end)
        end
            
		

			
           
			
                     

            
			
		end

end) 

task.spawn(function()
    while wait() do
        pcall(function()
            
              if not plr.Character.HumanoidRootPart:FindFirstChild("Noclip") then
                local mm = Instance.new('BodyVelocity')
                mm.Velocity = Vector3.new(0,0,0)
                mm.MaxForce = Vector3.new(9e9,9e9,9e9)
                mm.Name = "Noclip"
              end
              if not plr.Character.HumanoidRootPart:FindFirstChild("Noclip1") then
                local aki = Instance.new('BodyGryo')
                aki.P = 9e4
                aki.Parent = plr.Character.HumanoidRootPart
                aki.maxTorque = Vector3.new(9e9,9e9,9e9)
                aki.Cframe = workspace.CurrentCamera.CoordinateFrame
                aki.Name = "Noclip1"
              end
              plr.Character.HumanoidRootPart.PlatformStand = true
            if plr.Character.HumanoidRootPart:FindFirstChild("Noclip") then
                plr.Character.HumanoidRootPart:FindFirstChild("Noclip"):Destroy()
            end
            plr.Character.HumanoidRootPart.PlatformStand = false
            if plr.Character.HumanoidRootPart:FindFirstChild("Noclip1") then
                plr.Character.HumanoidRootPart:FindFirstChild("Noclip1"):Destroy()
            end
        end)
    end
end)

 local function getServers()
    local url =
        string.format("https://games.roblox.com/v1/games/%s/servers/Public?sortOrder=Asc&limit=100", game.PlaceId)
    local servers = game:GetService("HttpService"):JSONDecode(game:HttpGet(url)).data
    return servers
end

local function serverhop()
    local server
    repeat
        task.wait()
        server = getServers()[math.random(1, 100)]
    until server.id ~= game.JobId
    tpService:TeleportToPlaceInstance(game.PlaceId, server.id, plr)
end

task.spawn(function()
	wait(240)
		serverhop()
	
end)


  local function getBalloonUID(zoneName) 
    for i,v in pairs(Lib.BreakableCmds.AllByZoneAndClass(zoneName, "Chest")) do
        local isGift = string.find(v:GetAttribute("BreakableID"), "Balloon Gift")
        if v:GetAttribute("OwnerUsername") == plr.Name and isGift then
            return v:GetAttribute("BreakableUID")
        elseif v:GetAttribute("OwnerUserName") ~= plr.Name and isGift then
            return "skip"
        end
    end
  end

  local function getCurrentZone() 
    return Lib.MapCmds.GetCurrentZone() 
  end

  local function autoOrbsLootbags()
    for _, lootbag in pairs(game:GetService("Workspace").__THINGS:FindFirstChild("Lootbags"):GetChildren()) do
        if lootbag then
            game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("Lootbags_Claim"):FireServer(unpack( { [1] = { [1] = lootbag.Name, }, } ))
            lootbag:Destroy()
            task.wait()
        end
    end

    game:GetService("Workspace").__THINGS:FindFirstChild("Lootbags").ChildAdded:Connect(function(lootbag)
        task.wait()
        if lootbag then
            game:GetService("ReplicatedStorage"):WaitForChild("Network"):WaitForChild("Lootbags_Claim"):FireServer(unpack( { [1] = { [1] = lootbag.Name, }, } ))
            lootbag:Destroy()
        end
    end)

    game:GetService("Workspace").__THINGS:FindFirstChild("Orbs").ChildAdded:Connect(function(orb)
        task.wait()
        if orb then
            game:GetService("ReplicatedStorage"):WaitForChild("Network"):FindFirstChild("Orbs: Collect"):FireServer(unpack( { [1] = { [1] = tonumber(orb.Name), }, } ))
            orb:Destroy()
        end
    end)
  end

  local blacklistedIds = {}

  local function resetSpeed()
    plr.Character:WaitForChild("HumanoidRootPart").AssemblyAngularVelocity = Vector3.new(0,0,0)
    plr.Character:WaitForChild("HumanoidRootPart").AssemblyLinearVelocity = Vector3.new(0,0,0)
    plr.Character:WaitForChild("HumanoidRootPart").Velocity = Vector3.new(0,0,0)
  end
  local isExisting = true

  local oneBalloon =  LPH_NO_VIRTUALIZE( function (i,v)
  --local function oneBalloon(i,v)
    if v.Popped == true or table.find(blacklistedIds,i) then
        return
    end
    isExisting = true
    local position = v.Position
    task.spawn(function()
        local tickStart = tick()
        repeat
            plr.Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(position)
            task.wait(1)
        until getBalloonUID(getCurrentZone()) or tick()-tickStart > config.waitForBaloonTimeout
        if tick()-tickStart > config.waitForBaloonTimeout then
            isExisting = false
        end
        resetSpeed()
        plr.Character:WaitForChild("HumanoidRootPart").CFrame = CFrame.new(v.LandPosition)
        resetSpeed()
    end)
    if isExisting == false then
        return
    end
    task.wait()
    local args = {
        [1] = Vector3.new(position.X, position.Y, position.Z),
        [2] = 0.5794160315249014,
        [3] = -0.8331117721691044,
        [4] = 200,
    }
    Lib.Network.Invoke("Slingshot_Toggle")
    Lib.Network.Invoke("Slingshot_FireProjectile",unpack(args))
    local args = {
        [1] = v.Id,
    }
    Lib.Network.Fire("BalloonGifts_BalloonHit",unpack(args))
    task.wait()
    Lib.Network.Invoke("Slingshot_Unequip")
    local tickStart = tick()
    repeat
        task.wait(config.waitForCheck) 
    until getBalloonUID(getCurrentZone()) or tick()-tickStart > config.waitForBaloonTimeout
    if tick()-tickStart > config.waitForBaloonTimeout then
        table.insert(blacklistedIds,v.Id)
    end
    local breakableUID = getBalloonUID(getCurrentZone())
    task.wait()
    if breakableUID == "skip" then 
        table.insert(blacklistedIds,v.Id)
        return
    end
    if breakableUID then
        local tickStart = tick()
        repeat task.wait(math.random(15, 20))
            Lib.Network.Fire("Breakables_PlayerDealDamage", breakableUID)
        until (not getBalloonUID(getCurrentZone())) or tick()-tickStart > config.tapTimeout
        if tick()-tickStart > config.tapTimeout then
            table.insert(blacklistedIds,v.Id)
            return
        else
            task.wait(0.25)
            --game:GetService("Workspace").__THINGS:FindFirstChild("Lootbags").ChildAdded:Wait()
        end
    end

  end)

  local function baloonLoop()
    local activeBaloons = Lib.Network.Invoke("BalloonGifts_GetActiveBalloons")
  local balloonCount = 0
  for i,v in activeBaloons do
    balloonCount = balloonCount + 1
  end
  print("balloonCount:",balloonCount)
    for i,v in activeBaloons do
        oneBalloon(i,v)
    end
  end



  -- CODE EXECUTION START

  

  autoOrbsLootbags()

  for i=1,config.loops do
    print("loop no.", i)
    baloonLoop()
    task.wait(1)
  end
  print("hopping")

  tpService.TeleportInitFailed:Connect(function()
    task.wait(20)
    serverhop()
  end)

  serverhop()
